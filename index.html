<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>RIS Gates</title>
		<link rel="stylesheet" href="index.css">
		<script type="module" src="./src/index.ts"></script>
	</head>
	<body>
		<canvas id="canvas"></canvas>
		<div class="controls">
			<button id="ctrl-eval" class="hide-if-selected hide-if-pasting"
				aria-label="evaluate">
				<svg id="ctrl-eval-svg" viewBox="0 0 1 1"
					fill="var(--background)" stroke-width="0.1"
					stroke="var(--foreground)" class="enabled-if-eval">
					<title>evaluate</title>
					<use href="icons.svg#eval" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd-stable" class="show-if-eval"
				aria-label="previous stable tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous stable tick</title>
					<use href="icons.svg#tick-stable"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd" class="show-if-eval"
				aria-label="previous tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous tick</title>
					<use href="icons.svg#tick"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<div id="ctrl-tick-no" class="controls-message show-if-eval">0</div>
			<button id="ctrl-tick-fwd" class="show-if-eval"
				aria-label="next tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next tick</title>
					<use href="icons.svg#tick" />
				</svg>
			</button>
			<button id="ctrl-tick-fwd-stable" class="show-if-eval"
				aria-label="next stable tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next stable tick</title>
					<use href="icons.svg#tick-stable" />
				</svg>
			</button>
			<button id="ctrl-empty"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="empty">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>empty</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<button id="ctrl-io"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="IO">
				<svg viewBox="0 0 1 1" fill="var(--colors-io)">
					<title>IO</title>
					<use href="icons.svg#tile" />
				</svg>
			</button>
			<button id="ctrl-negate"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="negate">
				<svg viewBox="0 0 1 1" fill="var(--colors-negate)">
					<title>negate</title>
					<use href="icons.svg#tile" />
				</svg>
			</button>
			<button id="ctrl-conjoin"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="conjoin">
				<svg viewBox="0 0 1 1" fill="var(--colors-conjoin)">
					<title>conjoin</title>
					<use href="icons.svg#tile" />
				</svg>
			</button>
			<button id="ctrl-disjoin"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="disjoin">
				<svg viewBox="0 0 1 1" fill="var(--colors-disjoin)">
					<title>disjoin</title>
					<use href="icons.svg#tile" />
				</svg>
			</button>
			<button id="ctrl-dir"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="direction: up">
				<svg viewBox="0 0 1 1">
					<title>direction: up</title>
					<path id="dir" d="M0 1 .5 0 1 1Z" style="transform-origin:
					center" fill="var(--foreground)" />
				</svg>
			</button>
			<button id="ctrl-unselect" class="show-if-selected hide-if-pasting"
				aria-label="unselect">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>unselect</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<button id="ctrl-delete" class="show-if-selected hide-if-pasting"
				aria-label="delete">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>delete</title>
					<use href="icons.svg#delete" />
				</svg>
			</button>
			<button id="ctrl-cut" class="show-if-selected hide-if-pasting"
				aria-label="cut">
				<svg viewBox="0 0 1 1" fill="var(--foreground)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>cut</title>
					<use href="icons.svg#cut" />
				</svg>
			</button>
			<button id="ctrl-copy" class="show-if-selected hide-if-pasting"
				aria-label="copy">
				<svg viewBox="0 0 1 1" fill="var(--background)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>copy</title>
					<use href="icons.svg#copy" />
				</svg>
			</button>
			<button id="ctrl-paste"
				class="show-if-used-clipboard hide-if-eval hide-if-pasting"
				aria-label="paste">
				<svg viewBox="0 0 1 1" fill="var(--background)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>paste</title>
					<use href="icons.svg#paste" />
				</svg>
			</button>
			<button id="ctrl-menu"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				data-open-dialog="menu" aria-label="Menu">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>Menu</title>
					<use href="icons.svg#menu" />
				</svg>
			</button>
			<button id="ctrl-paste-cancel" class="show-if-pasting"
				aria-label="cancel pasting">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>cancel pasting</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<div class="controls-message show-if-pasting">
				Click top left corner to paste.
			</div>
		</div>
		<dialog id="dialog-menu">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Menu</h1>
			<section class="body">
				<label>
					<input id="chk-minor-grid" type="checkbox"
						autocomplete="off">
					Show minor grid
				</label>
				<label>
					Major grid length:
					<input id="inp-major-grid" type="number" placeholder="0"
						min="0" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
				<label>
					Rate of evaluation (in Hz):
					<input id="inp-eval-rate" type="number" placeholder="15"
						min="1" max="30" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
				<button id="btn-clear" class="full-width">clear</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="load">load</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="save">save</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="browse">browse</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="screenshot">screenshot</button>
			</section>
		</dialog>
		<dialog id="dialog-epilepsy">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Epilepsy Warning</h1>
			<section class="body">
				<p>
					This part may display flashing lights. If you have
					photosensitive epilepsy, you can either go back, or adjust
					the rate of evaluation via the input box below.
				</p>
				<label>
					Rate of evaluation (in Hz):
					<input id="inp-eval-rate2" type="number" placeholder="15"
						min="1" max="30" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
			</section>
		</dialog>
		<dialog id="dialog-load">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Load</h1>
			<section class="body">
				<button id="btn-paste">paste from clipboard</button>
				<save-browser primary="load"></save-browser>
			</section>
		</dialog>
		<dialog id="dialog-load-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Loading failed!</h1>
			<section class="body">
				<p>
					This file is corrupted and cannot be loaded. See the console
					for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-paste-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Paste</h1>
			<section class="body">
				<p>
					I cannot automatically read your clipboard.<br>
					Try pasting in the following text box instead.
				</p>
				<textarea class="full-width"></textarea>
			</section>
		</dialog>
		<dialog id="dialog-save">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Save</h1>
			<section class="body">
				<button id="btn-copy">copy to clipboard</button>
				<form method="dialog">
					<p>
						<label>Name
							<input type="text" name="name" autocomplete="off"
								required>
						</label>
					</p>
				</form>
				<h2>Other saves</h2>
				<save-browser></save-browser>
			</section>
		</dialog>
		<dialog id="dialog-save-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Saving failed!</h1>
			<section class="body">
				<p>
					See the console for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-copy-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Copy</h1>
			<section class="body">
				<p>
					I cannot automatically write to your clipboard.<br>
					Try copying from the following text box instead.
				</p>
				<textarea class="full-width"></textarea>
			</section>
		</dialog>
		<dialog id="dialog-browse">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Browse</h1>
			<section class="body">
				<button id="btn-export">export to clipboard</button>
				<button id="btn-import">import from clipboard</button>
				<button id="btn-delete-all">delete all</button>
				<save-browser primary="delete"
					secondary="copy to clipboard"></save-browser>
			</section>
		</dialog>
		<dialog id="dialog-screenshot">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="icons.svg#cross" />
				</svg>
			</button>
			<h1 class="title">Screenshot</h1>
			<section class="body">
				<form method="dialog">
					<fieldset>
						<legend>Appearance</legend>
						<label>
							X offset:
							<input type="number" name="x" step="any"
								placeholder="0" autocomplete="off"
								data-keep-value="true">
						</label>
						<label>
							Y offset:
							<input type="number" name="y" step="any"
								placeholder="0" autocomplete="off"
								data-keep-value="true">
						</label>
						<label>
							Scale:
							<input type="number" name="scale" step="any"
								placeholder="0" autocomplete="off"
								data-keep-value="true">
						</label>
						<label>
							<input type="checkbox" name="dark"
								autocomplete="off" data-keep-value="true">
							Use dark theme
						</label>
					</fieldset>
					<fieldset>
						<legend>Output</legend>
						<label>
							Width:
							<input type="number" name="width" placeholder="0"
								autocomplete="off" data-keep-value="true">
						</label>
						<label>
							Height:
							<input type="number" name="height" placeholder="0"
								autocomplete="off" data-keep-value="true">
						</label>
					</fieldset>
					<button class="full-width" name="type" value="png">Raster
						(PNG)</button>
					<button class="full-width" name="type" value="svg">Vector
						(SVG)</button>
				</form>
			</section>
		</dialog>
	</body>
</html>
