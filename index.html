<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>RIS Gates</title>
		<link rel="stylesheet" href="index.css">
		<script type="module" src="./src/index.ts"></script>
	</head>
	<body>
		<svg class="defs-only">
			<defs>
				<g id="cross">
					<line x2="1" y2="1" />
					<line x1="1" y1="0" x2="0" y2="1" />
				</g>
				<rect id="tile" width="1" height="1" />
				<g id="eval">
					<path d="M.08.9.28.69M.87.45A.35.35 0 01.53.8.35.35 0 01.18
						.45.35.35 0 01.53.1.35.35 0 01.87.45Z" />
					<path d="m.42.39.5.25-.5.25z" fill="var(--foreground)" />
				</g>
				<path id="menu" d="M.5.45A.05.05 0 01.55.5.05.05 0 01.5.55.05.05
					0 01.45.5.05.05 0 01.5.45ZM.8.45A.05.05 0 01.85.5.05.05 0 01
					.8.55.05.05 0 01.75.5.05.05 0 01.8.45ZM.2.45A.05.05 0 01.25
					.5.05.05 0 01.2.55.05.05 0 01.15.5.05.05 0 01.2.45Z" />
				<path id="tick" d="M.11.31.5.49.11.69ZM.5.31.89.49.5.69Z" />
				<path id="tick-stable"
					d="M.25.31.64.49.25.69ZM.64.69H.75V.31H.64Z" />
				<path id="delete" d="M.23.21C.2.21.18.23.18.26L.18.95C.18.98.2 1
					.23 1L.77 1C.8 1 .82.98.82.95L.82.26C.82.23.8.21.77.21L.23
					.21ZM.29.27C.29.27.29.27.29.27.31.27.33.29.33.32L.33.89C.33
					.92.31.94.29.94.27.94.26.92.26.89L.26.32C.26.29.27.27.29.27Z
					M.49.27C.49.27.5.27.5.27.52.27.54.29.54.32L.54.89C.54.92.52
					.94.5.94.48.94.46.92.46.89L.46.32C.46.29.48.27.49.27ZM.7.27C
					.7.27.7.27.71.27.73.27.74.29.74.32L.74.89C.74.92.73.94.71.94
					.69.94.67.92.67.89L.67.32C.67.29.68.27.7.27ZM.41.01C.4.01.39
					.02.39.03L.39.06C.39.06.39.06.39.07.39.07.39.07.39.07L.15.07
					C.14.07.12.08.12.1L.12.15C.12.17.14.19.15.19L.85.19C.86.19
					.88.17.88.15L.88.1C.88.08.86.07.85.07L.61.07C.61.07.61.07.61
					.07.61.07.61.06.61.06L.61.03C.61.02.6.01.59.01L.41.01Z" />
				<g id="cut">
					<path d="M.2.42C.1.31.07.18.07.06L.69.69C.72.66.75.64.8.64
						.88.64.95.72.95.8.95.88.88.95.8.95.75.95.72.93.68.9Z" fill="none" />
					<circle cx="0.8" cy="0.8" r="0.075" stroke="none" />
					<path d="m.99.01c-.23.23-.46.47-.69.7-.05-.06-.16-.07-.22
						-.02-.08.06-.08.19-.01.26.07.06.19.05.25-.02.17-.18.35
						-.36.53-.54.1-.1.14-.24.14-.38zm-.48.57c.06 0 .04.11-.02
						.07-.03-.02-.02-.07.02-.07zm-.34.16c.04 0 .08.02.09.06 0
						0 0 .01 0 .01 0 .05-.03.09-.08.09-.1.01-.11-.15-.01-.16z"
						stroke="none" />
				</g>
				<g id="copy">
					<rect x="0.13" y="0.1" ry="0.05" width="0.61"
						height="0.86" />
					<rect x="0.33" y="0.05" ry="0.05" width="0.53" height="0.74"
						fill="var(--foreground)" stroke="none" />
				</g>
				<g id="paste">
					<rect x="0.13" y="0.1" ry="0.05" width="0.61" height="0.86"
						transform="scale(1,-1)"
						style="transform-origin: center" />
					<rect x="0.34" y="0.01" ry="0.05" width="0.19" height="0.1"
						fill="var(--foreground)" />
				</g>
			</defs>
		</svg>
		<canvas id="canvas"></canvas>
		<div class="controls">
			<button id="ctrl-eval" class="hide-if-selected hide-if-pasting"
				aria-label="evaluate">
				<svg id="ctrl-eval-svg" viewBox="0 0 1 1"
					fill="var(--background)" stroke-width="0.1"
					stroke="var(--foreground)" class="enabled-if-eval">
					<title>evaluate</title>
					<use href="#eval" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd-stable" class="show-if-eval"
				aria-label="previous stable tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous stable tick</title>
					<use href="#tick-stable"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd" class="show-if-eval"
				aria-label="previous tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous tick</title>
					<use href="#tick"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<div id="ctrl-tick-no" class="controls-message show-if-eval">0</div>
			<button id="ctrl-tick-fwd" class="show-if-eval"
				aria-label="next tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next tick</title>
					<use href="#tick" />
				</svg>
			</button>
			<button id="ctrl-tick-fwd-stable" class="show-if-eval"
				aria-label="next stable tick">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next stable tick</title>
					<use href="#tick-stable" />
				</svg>
			</button>
			<button id="ctrl-empty"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="empty">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>empty</title>
					<use href="#cross" />
				</svg>
			</button>
			<button id="ctrl-io"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="IO">
				<svg viewBox="0 0 1 1" fill="var(--colors-io)">
					<title>IO</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-negate"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="negate">
				<svg viewBox="0 0 1 1" fill="var(--colors-negate)">
					<title>negate</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-conjoin"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="conjoin">
				<svg viewBox="0 0 1 1" fill="var(--colors-conjoin)">
					<title>conjoin</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-disjoin"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="disjoin">
				<svg viewBox="0 0 1 1" fill="var(--colors-disjoin)">
					<title>disjoin</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-dir"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				aria-label="direction: up">
				<svg viewBox="0 0 1 1">
					<title>direction: up</title>
					<path id="dir" d="M0 1 .5 0 1 1Z" style="transform-origin:
					center" fill="var(--foreground)" />
				</svg>
			</button>
			<button id="ctrl-unselect" class="show-if-selected hide-if-pasting"
				aria-label="unselect">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>unselect</title>
					<use href="#cross" />
				</svg>
			</button>
			<button id="ctrl-delete" class="show-if-selected hide-if-pasting"
				aria-label="delete">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>delete</title>
					<use href="#delete" />
				</svg>
			</button>
			<button id="ctrl-cut" class="show-if-selected hide-if-pasting"
				aria-label="cut">
				<svg viewBox="0 0 1 1" fill="var(--foreground)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>cut</title>
					<use href="#cut" />
				</svg>
			</button>
			<button id="ctrl-copy" class="show-if-selected hide-if-pasting"
				aria-label="copy">
				<svg viewBox="0 0 1 1" fill="var(--background)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>copy</title>
					<use href="#copy" />
				</svg>
			</button>
			<button id="ctrl-paste"
				class="show-if-used-clipboard hide-if-eval hide-if-pasting"
				aria-label="paste">
				<svg viewBox="0 0 1 1" fill="var(--background)"
					stroke-width="0.1" stroke="var(--foreground)">
					<title>paste</title>
					<use href="#paste" />
				</svg>
			</button>
			<button id="ctrl-menu"
				class="hide-if-eval hide-if-selected hide-if-pasting"
				data-open-dialog="menu" aria-label="Menu">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>Menu</title>
					<use href="#menu" />
				</svg>
			</button>
			<button id="ctrl-paste-cancel" class="show-if-pasting"
				aria-label="cancel pasting">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>cancel pasting</title>
					<use href="#cross" />
				</svg>
			</button>
			<div class="controls-message show-if-pasting">
				Click top left corner to paste.
			</div>
		</div>
		<dialog id="dialog-menu">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Menu</h1>
			<section class="body">
				<label>
					<input id="chk-minor-grid" type="checkbox"
						autocomplete="off">
					Show minor grid
				</label>
				<label>
					Major grid length:
					<input id="inp-major-grid" type="number" placeholder="0"
						min="0" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
				<label>
					Rate of evaluation (in Hz):
					<input id="inp-eval-rate" type="number" placeholder="15"
						min="1" max="30" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
				<button id="btn-clear" class="full-width">clear</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="load">load</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="save">save</button>
				<button class="full-width requires-local-storage"
					data-open-dialog="browse">browse</button>
			</section>
		</dialog>
		<dialog id="dialog-epilepsy">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Epilepsy Warning</h1>
			<section class="body">
				<p>
					This part may display flashing lights. If you have
					photosensitive epilepsy, you can either go back, or adjust
					the rate of evaluation via the input box below.
				</p>
				<label>
					Rate of evaluation (in Hz):
					<input id="inp-eval-rate2" type="number" placeholder="15"
						min="1" max="30" step="1" autocomplete="off"
						data-keep-value="true">
				</label>
			</section>
		</dialog>
		<dialog id="dialog-load">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Load</h1>
			<section class="body">
				<button id="btn-paste">paste from clipboard</button>
				<save-browser primary="load"></save-browser>
			</section>
		</dialog>
		<dialog id="dialog-load-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Loading failed!</h1>
			<section class="body">
				<p>
					This file is corrupted and cannot be loaded. See the console
					for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-paste-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Paste</h1>
			<section class="body">
				<p>
					I cannot automatically read your clipboard.<br>
					Try pasting in the following text box instead.
				</p>
				<textarea class="full-width"></textarea>
			</section>
		</dialog>
		<dialog id="dialog-save">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Save</h1>
			<section class="body">
				<button id="btn-copy">copy to clipboard</button>
				<form method="dialog">
					<p>
						<label>Name
							<input type="text" name="name" autocomplete="off"
								required>
						</label>
					</p>
				</form>
				<h2>Other saves</h2>
				<save-browser></save-browser>
			</section>
		</dialog>
		<dialog id="dialog-save-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Saving failed!</h1>
			<section class="body">
				<p>
					See the console for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-copy-failed">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Copy</h1>
			<section class="body">
				<p>
					I cannot automatically write to your clipboard.<br>
					Try copying from the following text box instead.
				</p>
				<textarea class="full-width"></textarea>
			</section>
		</dialog>
		<dialog id="dialog-browse">
			<button class="close" aria-label="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Browse</h1>
			<section class="body">
				<button id="btn-export">export to clipboard</button>
				<button id="btn-import">import from clipboard</button>
				<button id="btn-delete-all">delete all</button>
				<save-browser primary="delete"
					secondary="copy to clipboard"></save-browser>
			</section>
		</dialog>
	</body>
</html>
