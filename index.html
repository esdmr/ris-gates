<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>RIS Gates</title>
		<link rel="stylesheet" href="index.css">
		<script type="module" src="./src/index.ts"></script>
	</head>
	<body>
		<svg class="defs-only">
			<defs>
				<g id="cross">
					<line x2="1" y2="1" />
					<line x1="1" y1="0" x2="0" y2="1" />
				</g>
				<rect id="tile" width="1" height="1" />
				<g id="eval">
					<path
						d="M.0754.898.2814.6934M.8738.4491A.3466.3466 0 01.5272.7957.3466.3466 0 01.1807.4491.3466.3466 0 01.5272.1026.3466.3466 0 01.8738.4491Z" />
					<path d="m.425.387.5.25-.5.25z" fill="var(--foreground)" />
				</g>
				<path id="menu"
					d="M.5.45A.05.05 0 01.55.5.05.05 0 01.5.55.05.05 0 01.45.5.05.05 0 01.5.45ZM.8.45A.05.05 0 01.85.5.05.05 0 01.8.55.05.05 0 01.75.5.05.05 0 01.8.45ZM.2.45A.05.05 0 01.25.5.05.05 0 01.2.55.05.05 0 01.15.5.05.05 0 01.2.45Z" />
				<g id="tick">
					<path d="M.1129.3065.5.4871.1129.6935Z" />
					<path d="M.5.3065.8871.4871.5.6935Z" />
				</g>
				<g id="tick-stable">
					<path d="M.2528.3065.6399.4871.2528.6935Z" />
					<path d="M.6399.6935H.7472V.3065H.6399Z" />
				</g>
			</defs>
		</svg>
		<canvas id="canvas"></canvas>
		<div class="controls">
			<button id="ctrl-eval">
				<svg viewBox="0 0 1 1" fill="var(--background)"
					stroke-width="0.1" stroke="var(--foreground)"
					class="enabled-if-eval">
					<title>evaluate</title>
					<use href="#eval" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd-stable" class="show-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous stable tick</title>
					<use href="#tick-stable"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<button id="ctrl-tick-bwd" class="show-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>previous tick</title>
					<use href="#tick"
						style="transform-origin: center; transform: rotate(180deg)" />
				</svg>
			</button>
			<div id="ctrl-tick-no" class="tick-no show-if-eval">0</div>
			<button id="ctrl-tick-fwd" class="show-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next tick</title>
					<use href="#tick" />
				</svg>
			</button>
			<button id="ctrl-tick-fwd-stable" class="show-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--foreground)">
					<title>next stable tick</title>
					<use href="#tick-stable" />
				</svg>
			</button>
			<button id="ctrl-empty" class="hide-if-eval">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>empty</title>
					<use href="#cross" />
				</svg>
			</button>
			<button id="ctrl-io" class="hide-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--colors-io)">
					<title>IO</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-negate" class="hide-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--colors-negate)">
					<title>negate</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-conjoin" class="hide-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--colors-conjoin)">
					<title>conjoin</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-disjoin" class="hide-if-eval">
				<svg viewBox="0 0 1 1" fill="var(--colors-disjoin)">
					<title>disjoin</title>
					<use href="#tile" />
				</svg>
			</button>
			<button id="ctrl-dir" class="hide-if-eval">
				<svg viewBox="0 0 1 1">
					<title>direction: up</title>
					<path id="dir" d="M0 1 .5 0 1 1Z" style="transform-origin:
					center" fill="var(--foreground)" />
				</svg>
			</button>
			<button id="ctrl-menu" class="hide-if-eval" data-open-dialog="menu">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>Menu</title>
					<use href="#menu" />
				</svg>
			</button>
		</div>
		<dialog id="dialog-menu">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Menu</h1>
			<section class="body">
				<ul class="hide-list-bullets full-width">
					<li>
						<label>
							<input id="chk-minor-grid" type="checkbox"
								autocomplete="off">
							Show minor grid
						</label>
					</li>
					<li>
						<label>
							Major grid length:
							<input id="inp-major-grid" type="number"
								placeholder="0" min="0" step="1"
								autocomplete="off" data-keep-value="true">
						</label>
					</li>
					<li>
						<label>
							Rate of evaluation (in Hz):
							<input id="inp-eval-rate" type="number"
								placeholder="15" min="1" max="30" step="1"
								autocomplete="off" data-keep-value="true">
						</label>
					</li>
					<li><button id="btn-clear" class="full-width">clear</button>
					</li>
					<li><button class="full-width requires-local-storage"
							data-open-dialog="load">load</button></li>
					<li><button class="full-width requires-local-storage"
							data-open-dialog="save">save</button></li>
					<li><button class="full-width requires-local-storage"
							data-open-dialog="browse">browse</button></li>
				</ul>
			</section>
		</dialog>
		<dialog id="dialog-epilepsy">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Epilepsy Warning</h1>
			<section class="body">
				<p>
					This part may display flashing lights. If you have
					photosensitive epilepsy, you can either go back, or adjust
					the rate of evaluation via the input box below.
				</p>
				<p>
					<label>
						Rate of evaluation (in Hz):
						<input id="inp-eval-rate2" type="number"
							placeholder="15" min="1" max="30" step="1"
							autocomplete="off" data-keep-value="true">
					</label>
				</p>
			</section>
		</dialog>
		<dialog id="dialog-load">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Load</h1>
			<section class="body">
				<button id="btn-paste">paste from clipboard</button>
				<save-browser primary="load" />
			</section>
		</dialog>
		<dialog id="dialog-load-failed">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Loading failed!</h1>
			<section class="body">
				<p>
					This file is corrupted and cannot be loaded. See the console
					for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-paste-failed">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Paste</h1>
			<section class="body">
				<p>
					I cannot automatically read your clipboard.<br>
					Try pasting in the following text box instead.
				</p>
				<textarea></textarea>
			</section>
		</dialog>
		<dialog id="dialog-save">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Save</h1>
			<section class="body">
				<button id="btn-copy">copy to clipboard</button>
				<form method="dialog">
					<p>
						<label>Name
							<input type="text" name="name" autocomplete="off"
								required>
						</label>
					</p>
				</form>
				<h2>Other saves</h2>
				<save-browser />
			</section>
		</dialog>
		<dialog id="dialog-save-failed">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Saving failed!</h1>
			<section class="body">
				<p>
					See the console for more information.
				</p>
			</section>
		</dialog>
		<dialog id="dialog-copy-failed">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Copy</h1>
			<section class="body">
				<p>
					I cannot automatically write to your clipboard.<br>
					Try copying from the following text box instead.
				</p>
				<textarea></textarea>
			</section>
		</dialog>
		<dialog id="dialog-browse">
			<button class="close">
				<svg viewBox="0 0 1 1" stroke-width="0.1"
					stroke="var(--foreground)">
					<title>close</title>
					<use href="#cross" />
				</svg>
			</button>
			<h1 class="title">Browse</h1>
			<section class="body">
				<button id="btn-export">export to clipboard</button>
				<button id="btn-import">import from clipboard</button>
				<button id="btn-delete-all">delete all</button>
				<save-browser primary="delete" secondary="copy to clipboard" />
			</section>
		</dialog>
	</body>
</html>
